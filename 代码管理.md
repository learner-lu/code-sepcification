采用GitHub和git进行代码管理
---
由于笔者水平有限,该文档并不是git的教学文档,仅为学习了git的用法之后的总结,希望能通过整理的方式加深印象,如果对git尚不熟悉,可以参考以下文章
## Git入门级参考文章
>[知乎文章](https://www.zhihu.com/question/28976652/answer/1969388194)<br>
>[知乎文章](https://zhuanlan.zhihu.com/p/135183491)

## git的使用
git支持linux的部分命令,包括`cat`,`mkdir`,`touch`,`vim`,`rm`,`cd`等等,也有一些常用的命令和提交格式<br>
git不支持完整的正则表达式语法(regex es),它只支持`unix fnmatch`(filename pattern matching),通常来说在命令行中使用正则语法容易出现误导，如`demo.c`等习惯性的写法,因此采用[unix的匹配写法](https://docs.python.org/3/library/fnmatch.html),具体为:
- `*`匹配任意字符,任意次数
- `?`匹配任意字符,一次
- `[seq]` 匹配 `seq` 中出现的字符,一次
- `[!seq]` 匹配不在 `seq` 中出现的字符,一次
如匹配 `demo.cpp`可使用如下任意一种写法,正则写法如 `\w*\.\w*` 将**不被识别**
```shell
*.cpp | demo.* | demo.???
```
### 关于 `add`
> 将文件从工作区 `add` 到暂存区
- **添加所有文件**
  ```shell
  git add .
  ```
- 添加所有 `.c`
  ```shell
  git add *.c
  ```
- **添加 `FILEPATH` 文件夹下所有的文件**
  ```shell
  git add FILEPATH/
  ```
- 查看添加了哪些文件
  ```shell
  git status
  ```
- `gitigore` 的编写
  
### 关于 `rm`
> 有时候添加错误的或未完成需要修改的文件到暂存区,需要从暂存区删除该文件
- **删除方式**
  > 注意,这里可以使用 `fnmatch`匹配文件名,但是如果某一匹配项不在暂存区而在工作区未被加入,则删除失败<br>
  > 例如 `1.txt` 在暂存区中, ` 2.txt` 未加入暂存区,则使用 `git rm --cached *.txt` 会删除失败<br>
  > `git add` 不会有这个问题,可以理解为把所有匹配项都加入暂存区,重复的再加一次
  - 从暂存区删除该文件,物理文件不删除(推荐使用),放入垃圾桶
    ```shell
    git rm --cached FILENAME
    ```
  - 删除暂存区中的文件和物理文件,**谨慎使用**
    ```shell
    git rm --f FILENAME
    ```
- 查看添加了哪些文件
  ```shell
  git status
  ```
### 关于 `commit`
> 将暂存区的文件上传到仓库区
- **提交**
  ```shell
  git commit -m "COMMIT MESSAGE"
  ```
  关于 `commit message` 的规范,可以查看[commit规范](commit规范.md)
- 查看commit日志(Q退出)
  ```shell
  git log
  ```
- 单行查看commit日志,关键信息
  ```shell
  git log --pretty=oneline
  ```
- 回退到上一个版本(`--hard`本地代码改变.**谨慎使用**)
  ```shell
  git reset --hard HEAD^
  ```
  回退到上N个版本
  ```shell
  git reset --hard HEAD~N
  ``` 
  >通常来说使用 `git reset --hard HEAD^`来进行版本回退是因为有人错误的提交了commit,如提交到了不同的分支(branch)或者误修改了某些文件,但这种情况还是相对较少<br>
  >但这里提供一种可能会使用的例子:<br>
  >比如说你今天打算改一改代码,你可以先把所有文件`git add`然后`git commit`一次,然后开始修改,`a.txt b.txt c.txt`等文件,修改完之后你发现测试的结果不尽如人意,或者你觉得你的修改太愚蠢了太繁琐了想要重写,这时候就可以使用`git reset --hard HEAD` 来回到最后一次commit的位置,这样你在`a/b/c.txt`中的所有修改都会撤回(**注意会改变本地文件,使用时请注意**),就不需要你记住修改了什么文件再一次次`ctrl+z`回退了.
- 返回到某一个指定的版本
  ```shell
  git reflog                # 查看所有commit记录,根据commit内容搜索,找到前面对应的序号
  git reset --hard 3f72bae  # 同步到某一版本
  ```




